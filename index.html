<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprehensive Financial Calculators</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-dark: #0f172a; /* Slate 900 */
            --bg-medium: #1e293b; /* Slate 800 */
            --border-color: #334155; /* Slate 700 */
            --text-light: #cbd5e1; /* Slate 300 */
            --text-heading: #f8fafc; /* Slate 50 */
            --accent-teal: #2dd4bf; /* Teal 400 */
            --accent-blue: #60a5fa; /* Blue 400 */
            --accent-purple: #a78bfa; /* Violet 400 */
            --accent-pink: #f472b6; /* Pink 400 */
            --accent-red: #f87171; /* Red 400 */
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            background-image: radial-gradient(ellipse at top, #1e293b, #0f172a);
            color: var(--text-light);
        }

        .main-layout {
            display: grid;
            grid-template-columns: 280px 1fr;
            min-height: 100vh;
        }
        
        .sidebar {
            background-color: rgba(30, 41, 59, 0.5);
            padding: 1.5rem;
            border-right: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
        }
        .sidebar-nav-link {
            display: block; padding: 0.75rem 1rem; border-radius: 0.5rem;
            color: var(--text-light); font-weight: 500;
            transition: all 0.3s ease; transform: scale(1);
        }
        .sidebar-nav-link:hover {
            background-color: var(--border-color); color: var(--text-heading);
            transform: scale(1.03);
        }
        .sidebar-nav-link.active {
            background-color: var(--accent-teal); color: var(--bg-dark);
            font-weight: 700; box-shadow: 0 4px 14px rgba(45, 212, 191, 0.3);
        }

        .content-area { padding: 2.5rem; overflow-y: auto; }
        .calculator-container { display: none; }
        .calculator-container.active {
            display: block; animation: fadeInScaleUp 0.6s cubic-bezier(0.165, 0.84, 0.44, 1);
        }

        @keyframes fadeInScaleUp {
            from { opacity: 0; transform: translateY(20px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .calculator-card {
            background-color: var(--bg-medium); border: 1px solid var(--border-color);
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .input-group {
            background-color: var(--bg-dark); border-radius: 0.75rem; padding: 1rem;
            transition: box-shadow 0.3s ease; display: flex; align-items: center;
            border: 1px solid var(--border-color);
        }
        .input-group:focus-within, .select-group:focus-within {
            box-shadow: 0 0 0 3px rgba(45, 212, 191, 0.5);
            border-color: var(--accent-teal);
        }

        .input-field, .select-field {
            background-color: transparent; border: none; color: var(--text-heading);
            font-size: 1.125rem; font-weight: 600; width: 100%;
            outline: none; padding-left: 0.5rem;
        }
         .select-field { padding-left: 0; padding-right: 0.5rem; -webkit-appearance: none; -moz-appearance: none; appearance: none; background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2364748b' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e"); background-position: right .5rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em; }
        
        .select-field option {
            background: var(--bg-medium);
            color: var(--text-heading);
        }

        .result-highlight-container { position: relative; cursor: pointer; }
        .result-highlight-container:hover .result-highlight { color: #5eead4; }
        .result-highlight {
            color: var(--accent-teal); font-weight: 800;
            font-size: 2.75rem; transition: color 0.2s ease-in-out;
        }
        .result-input {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--bg-medium); color: var(--text-heading);
            border: 2px solid var(--accent-teal); border-radius: 0.5rem;
            text-align: center; font-family: 'Inter', sans-serif; font-weight: 800; font-size: 2.75rem;
        }
        
        .tab-button { transition: all 0.3s ease; border-bottom: 3px solid transparent; padding-bottom: 0.5rem; }
        .tab-button.active { color: var(--accent-teal); border-bottom-color: var(--accent-teal); }
        
        .results-table th { background-color: var(--border-color); }
        .results-table tr { border-bottom: 1px solid var(--border-color); }
        .results-table tr:last-child { border-bottom: none; }
        .results-table td, .results-table th { padding: 0.75rem 1rem; text-align: right;}
        .results-table td:first-child, .results-table th:first-child { text-align: left; font-weight: 600; color: var(--text-heading)}
    </style>
</head>
<body class="antialiased">

    <div class="main-layout">
        <aside class="sidebar">
            <h2 class="text-2xl font-bold text-white mb-8">Calculators</h2>
            <nav id="calculator-nav" class="space-y-2">
                <a class="sidebar-nav-link" data-target="mortgage">Mortgage Calculator</a>
                <a class="sidebar-nav-link" data-target="auto-loan">Auto Loan Calculator</a>
                <a class="sidebar-nav-link" data-target="savings">Savings Calculator</a>
                <a class="sidebar-nav-link" data-target="retirement">Retirement Calculator</a>
                <a class="sidebar-nav-link active" data-target="salary">Salary Paycheck Calculator</a>
            </nav>
        </aside>

        <main id="main-content" class="content-area">
            
            <div id="mortgage-calculator" class="calculator-container">
                 <!-- Mortgage Calculator HTML (Omitted for brevity, structure is consistent) -->
            </div>

            <div id="auto-loan-calculator" class="calculator-container">
                 <!-- Auto Loan Calculator HTML (Omitted for brevity, structure is consistent) -->
            </div>

            <div id="savings-calculator" class="calculator-container">
                 <!-- Savings Calculator HTML (Omitted for brevity, structure is consistent) -->
            </div>
            
            <div id="retirement-calculator" class="calculator-container">
                 <!-- Retirement Calculator HTML (Omitted for brevity, structure is consistent) -->
            </div>

            <div id="salary-calculator" class="calculator-container active">
                 <header class="text-center mb-10"><h1 class="text-4xl sm:text-5xl font-bold text-white tracking-tight">Salary Paycheck Calculator</h1></header>
                 <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
                    <div class="lg:col-span-3">
                        <div class="calculator-card p-6">
                            <div class="flex space-x-8 border-b border-slate-700 mb-6">
                                <button class="paycheck-tab-button tab-button active" data-target="earnings-panel">Earnings</button>
                                <button class="paycheck-tab-button tab-button" data-target="taxes-panel">Taxes</button>
                                <button class="paycheck-tab-button tab-button" data-target="benefits-panel">Benefits</button>
                            </div>
                            
                            <div id="paycheck-panels">
                                <div id="earnings-panel" class="paycheck-panel space-y-6">
                                    <div><label for="payFrequency" class="block text-sm font-medium text-gray-300 mb-2">How often are you paid?</label><div class="input-group select-group"><select id="payFrequency" class="select-field"><option value="weekly">Weekly</option><option value="bi-weekly" selected>Bi-weekly</option><option value="semi-monthly">Semi-monthly</option><option value="monthly">Monthly</option></select></div></div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">How are you paid?</label>
                                        <div class="grid grid-cols-6 gap-4">
                                            <div class="col-span-2 input-group select-group"><select id="payType" class="select-field"><option value="salary">Salary</option><option value="hourly">Hourly</option></select></div>
                                            <div class="col-span-2 input-group select-group"><select id="grossPayMethod" class="select-field"><option value="per-year">Per Year</option></select></div>
                                            <div class="col-span-2 input-group"><span class="text-gray-400 font-semibold">$</span><input type="text" id="grossPayAmount" class="input-field" value="30,912.29"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Any overtime?</label>
                                        <div class="grid grid-cols-2 gap-4">
                                            <div class="input-group"><label class="text-gray-400 px-2">Hours</label><input type="number" id="overtimeHours" class="input-field" value="0"></div>
                                            <div class="input-group"><label class="text-gray-400 px-2">Rate</label><input type="number" id="overtimeRate" class="input-field" value="1.5">x Regular</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div id="taxes-panel" class="paycheck-panel hidden space-y-6">
                                    <div><h3 class="text-xl font-bold text-white">Federal Taxes</h3></div>
                                    <div><label for="filingStatus" class="block text-sm font-medium text-gray-300 mb-2">Filing Status</label><div class="input-group select-group"><select id="filingStatus" class="select-field"><option value="single">Single</option><option value="married">Married Filing Jointly</option></select></div></div>
                                    <div><label for="federalAllowances" class="block text-sm font-medium text-gray-300 mb-2">Federal Allowances (W-4)</label><div class="input-group"><input type="number" id="federalAllowances" class="input-field" value="1"></div></div>
                                    <div class="pt-4 border-t border-slate-700"><h3 class="text-xl font-bold text-white">State Taxes</h3></div>
                                    <div><label for="stateTaxRate" class="block text-sm font-medium text-gray-300 mb-2">State Income Tax Rate (%)</label><div class="input-group"><input type="number" id="stateTaxRate" class="input-field" value="4.5"></div></div>
                                </div>
                                
                                <div id="benefits-panel" class="paycheck-panel hidden space-y-6">
                                     <div><h3 class="text-xl font-bold text-white">Pre-Tax Deductions</h3></div>
                                     <div><label for="deduct401k" class="block text-sm font-medium text-gray-300 mb-2">Retirement/FSA Contribution</label><div class="input-group"><input type="number" id="deduct401k" class="input-field" value="6.1"><span class="text-gray-400 font-semibold pr-2">%</span></div></div>
                                     <div class="pt-4 border-t border-slate-700"><h3 class="text-xl font-bold text-white">Post-Tax Deductions</h3></div>
                                     <div><label for="deductInsurance" class="block text-sm font-medium text-gray-300 mb-2">Health Insurance (per pay period)</label><div class="input-group"><span>$</span><input type="text" id="deductInsurance" class="input-field" value="0"></div></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="lg:col-span-2">
                        <div class="calculator-card p-6">
                            <h2 class="text-2xl font-bold text-white mb-4">Paycheck Summary</h2>
                             <div class="h-64 mb-6"><canvas id="paycheckChart"></canvas></div>
                            <table class="w-full text-left text-sm results-table">
                                <tbody id="paycheckTableBody">
                                    <tr><td>Gross Pay</td><td id="summaryGrossPay">$0.00</td></tr>
                                    <tr><td>Taxes</td><td id="summaryTaxes">$0.00</td></tr>
                                    <tr><td>Benefits/Deductions</td><td id="summaryBenefits">$0.00</td></tr>
                                    <tr class="font-bold text-lg text-white border-t-2 border-teal-400"><td>Take Home</td><td id="summaryTakeHome">$0.00</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        
        const App = {
            // --- STATE & CONFIG ---
            activeCalculator: null,
            charts: {},
            elements: {
                nav: document.getElementById('calculator-nav'),
                content: document.getElementById('main-content'),
                containers: document.querySelectorAll('.calculator-container'),
            },
            // --- UTILITY FUNCTIONS ---
            utils: {
                parseCurrency: (value) => parseFloat(String(value).replace(/[^0-9.-]+/g, "")) || 0,
                formatCurrency: (value, cents = false) => {
                    const options = { style: 'currency', currency: 'USD' };
                    if (!cents) {
                        options.minimumFractionDigits = 0;
                        options.maximumFractionDigits = 0;
                    } else {
                        options.minimumFractionDigits = 2;
                        options.maximumFractionDigits = 2;
                    }
                    return new Intl.NumberFormat('en-US', options).format(value);
                }
            },

            // --- INITIALIZATION ---
            init() {
                this.setupNavigation();
                this.setupEventListeners();
                // Activate the default calculator
                const defaultCalc = this.elements.nav.querySelector('.active')?.dataset.target || 'salary';
                this.switchCalculator(defaultCalc);
            },

            // --- EVENT HANDLING ---
            setupNavigation() {
                this.elements.nav.addEventListener('click', (e) => {
                    if (e.target.matches('.sidebar-nav-link')) {
                        const targetId = e.target.dataset.target;
                        this.switchCalculator(targetId);
                    }
                });
            },
            
            setupEventListeners() {
                this.elements.content.addEventListener('input', (e) => {
                    if (e.target.matches('input, select')) {
                        this.calculators[this.activeCalculator]?.calculate();
                    }
                });
            },

            // --- CORE LOGIC ---
            switchCalculator(targetId) {
                this.activeCalculator = targetId;
                // Update nav links
                this.elements.nav.querySelectorAll('.sidebar-nav-link').forEach(link => {
                    link.classList.toggle('active', link.dataset.target === targetId);
                });
                // Update content panels
                this.elements.containers.forEach(container => {
                    container.classList.toggle('active', container.id === `${targetId}-calculator`);
                });
                // Initialize the calculator if it has an init function
                this.calculators[targetId]?.init?.();
            },
            
            // --- CALCULATOR MODULES ---
            calculators: {
                // Placeholder for other calculators to maintain structure
                mortgage: { init() { console.log("Mortgage Calculator Initialized"); } },
                'auto-loan': { init() { console.log("Auto Loan Calculator Initialized"); } },
                savings: { init() { console.log("Savings Calculator Initialized"); } },
                retirement: { init() { console.log("Retirement Calculator Initialized"); } },

                salary: {
                    elements: {},
                    chart: null,
                    
                    init() {
                        // Cache elements only once
                        this.elements = {
                            payFrequency: document.getElementById('payFrequency'),
                            payType: document.getElementById('payType'),
                            grossPayMethod: document.getElementById('grossPayMethod'),
                            grossPayAmount: document.getElementById('grossPayAmount'),
                            overtimeHours: document.getElementById('overtimeHours'),
                            overtimeRate: document.getElementById('overtimeRate'),
                            filingStatus: document.getElementById('filingStatus'),
                            stateTaxRate: document.getElementById('stateTaxRate'),
                            deduct401k: document.getElementById('deduct401k'),
                            deductInsurance: document.getElementById('deductInsurance'),
                            summaryGrossPay: document.getElementById('summaryGrossPay'),
                            summaryTaxes: document.getElementById('summaryTaxes'),
                            summaryBenefits: document.getElementById('summaryBenefits'),
                            summaryTakeHome: document.getElementById('summaryTakeHome'),
                            canvas: document.getElementById('paycheckChart'),
                            paycheckTabs: document.querySelectorAll('.paycheck-tab-button'),
                            paycheckPanels: document.querySelectorAll('.paycheck-panel')
                        };
                        
                        this.setupTabs();
                        this.setupDynamicSelect();
                        this.calculate();
                    },
                    
                    setupTabs() {
                        this.elements.paycheckTabs.forEach(tab => {
                            tab.addEventListener('click', () => {
                                this.elements.paycheckTabs.forEach(t => t.classList.remove('active'));
                                tab.classList.add('active');
                                const targetPanelId = tab.dataset.target;
                                this.elements.paycheckPanels.forEach(panel => {
                                    panel.classList.toggle('hidden', panel.id !== targetPanelId);
                                });
                            });
                        });
                    },

                    setupDynamicSelect() {
                         this.elements.payType.addEventListener('change', () => {
                            const methodSelect = this.elements.grossPayMethod;
                            methodSelect.innerHTML = '';
                            if (this.elements.payType.value === 'salary') {
                                methodSelect.add(new Option('Per Year', 'per-year'));
                            } else {
                                methodSelect.add(new Option('Per Hour', 'per-hour'));
                            }
                            this.calculate();
                        });
                    },

                    calculate() {
                        const { utils } = App;
                        const el = this.elements;

                        const payFrequency = el.payFrequency.value;
                        const payType = el.payType.value;
                        const grossPayAmount = utils.parseCurrency(el.grossPayAmount.value);
                        const overtimeHours = parseFloat(el.overtimeHours.value) || 0;
                        const overtimeRateMultiplier = parseFloat(el.overtimeRate.value) || 1.5;

                        let annualSalary = 0;
                        let regularHourlyRate = 0;
                        if (payType === 'salary') {
                            annualSalary = grossPayAmount;
                            regularHourlyRate = annualSalary / (52 * 40);
                        } else {
                            regularHourlyRate = grossPayAmount;
                            annualSalary = regularHourlyRate * 52 * 40;
                        }

                        const payPeriods = { 'weekly': 52, 'bi-weekly': 26, 'semi-monthly': 24, 'monthly': 12 };
                        const periodsPerYear = payPeriods[payFrequency];
                        let grossPayPerPeriod = annualSalary / periodsPerYear;

                        const overtimePay = overtimeHours * (regularHourlyRate * overtimeRateMultiplier);
                        grossPayPerPeriod += overtimePay;

                        const preTaxDeductions = grossPayPerPeriod * (parseFloat(el.deduct401k.value) / 100);
                        const taxableIncome = grossPayPerPeriod - preTaxDeductions;
                        const postTaxDeductions = utils.parseCurrency(el.deductInsurance.value);
                        const totalBenefits = preTaxDeductions + postTaxDeductions;
                        
                        const annualTaxableIncome = taxableIncome * periodsPerYear;
                        const filingStatus = el.filingStatus.value;
                        
                        const taxBrackets = {
                            single: [ { upto: 11600, rate: 0.10 }, { upto: 47150, rate: 0.12 }, { upto: 100525, rate: 0.22 }, { upto: 191950, rate: 0.24 }, { upto: 243725, rate: 0.32 }, { upto: 609350, rate: 0.35 }, { upto: Infinity, rate: 0.37 } ],
                            married: [ { upto: 23200, rate: 0.10 }, { upto: 94300, rate: 0.12 }, { upto: 201050, rate: 0.22 }, { upto: 383900, rate: 0.24 }, { upto: 487450, rate: 0.32 }, { upto: 731100, rate: 0.35 }, { upto: Infinity, rate: 0.37 } ]
                        };
                        
                        let annualFederalTax = 0;
                        let incomeLeft = annualTaxableIncome;
                        let lastLimit = 0;
                        for (const bracket of taxBrackets[filingStatus]) {
                            if (incomeLeft <= 0) break;
                            const taxableInBracket = Math.min(incomeLeft, bracket.upto - lastLimit);
                            annualFederalTax += taxableInBracket * bracket.rate;
                            incomeLeft -= taxableInBracket;
                            lastLimit = bracket.upto;
                        }

                        const federalTaxPerPeriod = annualFederalTax / periodsPerYear;
                        const stateTaxPerPeriod = taxableIncome * (parseFloat(el.stateTaxRate.value) / 100);
                        const totalTaxes = federalTaxPerPeriod + stateTaxPerPeriod;

                        const takeHomePay = grossPayPerPeriod - totalTaxes - totalBenefits;

                        el.summaryGrossPay.textContent = utils.formatCurrency(grossPayPerPeriod, true);
                        el.summaryTaxes.textContent = utils.formatCurrency(totalTaxes, true);
                        el.summaryBenefits.textContent = utils.formatCurrency(totalBenefits, true);
                        el.summaryTakeHome.textContent = utils.formatCurrency(takeHomePay, true);

                        this.updateChart(takeHomePay, totalTaxes, totalBenefits);
                    },

                    updateChart(takeHome, taxes, benefits) {
                        const CHART_COLORS = App.utils.CHART_COLORS || {};
                        const ctx = this.elements.canvas.getContext('2d');
                        const data = {
                            labels: ['Take Home', 'Taxes', 'Benefits'],
                            datasets: [{ 
                                data: [takeHome, taxes, benefits], 
                                backgroundColor: [CHART_COLORS.teal, CHART_COLORS.red, CHART_COLORS.purple],
                                borderColor: CHART_COLORS.medium || '#1e293b',
                                borderWidth: 4,
                                hoverOffset: 8
                            }]
                        };
                        if (this.chart) { 
                            this.chart.data = data; 
                            this.chart.update(); 
                        } else { 
                            this.chart = new Chart(ctx, { type: 'doughnut', data, options: { responsive: true, maintainAspectRatio: false, cutout: '70%', plugins: { legend: { position: 'bottom', labels: { color: CHART_COLORS.light || '#cbd5e1', boxWidth: 12, padding: 20 } } } } }); 
                        }
                    }
                }
            }
        };

        App.init();

    });
    </script>
</body>
</html>
